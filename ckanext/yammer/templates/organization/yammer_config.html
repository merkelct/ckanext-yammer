{% extends "organization/edit_base.html" %}

{% import 'macros/form.html' as form %}

{% block subtitle %}{{ _('Yammer Coinfiguration') }} - {{ super() }}{% endblock %}

{% block primary_content_inner %}

{% block yammer_configuration %}

    <h3>Yammer configuration options </h3>

    <script type="text/javascript" data-app-id="0G229UnVdvDo85oMSxBQ" src="https://c64.assets-yammer.com/assets/platform_js_sdk.js"></script>

    <span id="yammer-login"></span>
    <script>
    //add the yammer login button to the manage orgs page
    yam.connect.loginButton('#yammer-login', function (resp) {
        if (resp.authResponse) {
            document.getElementById('yammer-login').innerHTML = 'You are authenticated to Yammer!';
            document.getElementById('field-ckanext.yammer.token').value = resp.access_token.token;

        }
        else {
            //authResponse = false if the user is not logged in, or is logged in but hasn't authorized your app yet
            alert("You are not logged into yammer and we cannot get an access token for Organization posting to " +
                "Yammer groups. If there is not one in the Yammer token file you must re-authenticate to get a new one and save");
        }
    });

    </script>

    {{ form.input('ckanext.yammer.token', id='field-ckanext.yammer.token', label=_('Yammer Token') )}}
    {{ form.input('ckanext.yammer.groups', id='field-ckanext.yammer.groups', label=_('Yammer groups') )}}
    {{ form.checkbox('Create', checked=false) }}
    {{ form.checkbox('Update', checked=false) }}
    {{ form.checkbox('Delete', checked=false) }}




{% endblock %}

{% endblock %}

